(function(){angular.module("ngChromecast",[]).run(["$rootScope","ReceiverManager","MessageBus",function(e,n,t){n.start().then(function(){return t.initialize()}).then(function(){e.$broadcast("chromecast.ready",!0)})}])}).call(this),function(){"use strict";angular.module("ngChromecast").provider("ngChromecast",function(){var e,n=this;return this.loggingLevel="NONE",this.channels=[],e=function(){return{channels:this.channels,loggingLevel:this.loggingLevel}},{setChannel:function(e,n){this.setChannels([{namespace:e,type:n}])},setChannels:function(e){var t=["JSON","STRING","CUSTOM"];if(!angular.isArray(e))throw new Error("Invalid channels array");angular.forEach(e,function(e){if(!angular.isObject(e)||!e.namespace||-1===t.indexOf(e.type))throw new Error("Invalid channel object");n.channels.push(e)}.bind(this))},setLoggingLevel:function(e){var n=["DEBUG","ERROR","NONE","VERBOSE","WARNING"];n.indexOf(e)>-1&&(this.loggingLevel=e)},$get:e}})}.call(this),function(){"use strict";function e(e){var n={};return n.getInstance=function(){var n,t=e.defer();return cast?t.resolve(cast):n=$interval(function(){cast&&($interval.cancel(n),t.resolve(cast))},100),t.promise},n}angular.module("ngChromecast").factory("CastService",["$q","$interval",e])}.call(this),function(){"use strict";function e(e,n,t){var a,r={};return a=function(n){console.log("[angular-chromecast]","messageRecieved",n),e.$broadcast("chromecast.messageReceived",n)},r.initialize=function(){return t.getInstance().then(function(e){var t,r=e.receiver.CastReceiverManager.getInstance();angular.forEach(n.channels,function(n){t=r.getCastMessageBus(n.namespace,e.receiver.CastMessageBus.MessageType[n.type]),t.onMessage=a})})},r.broadcast=function(e){return r.getMessageBus(e).then(function(e){return e.broadcast(mssage)})},r.send=function(e,n,t){return r.getMessageBus(e).then(function(e){return e.send(n,t)})},r.getMessageBus=function(e){return t.getInstance().then(function(n){var t=n.receiver.CastReceiverManager.getInstance(),a=t.getCastMessageBus(e);return a})},r.getCastChannel=function(e,n){return r.getMessageBus(e).then(function(e){return e.getCastChannel(n)})},r}angular.module("ngChromecast").factory("MessageBus",["$rootScope","ngChromecast","CastService",e])}.call(this),function(){"use strict";function e(e){var n={};return n.start=function(){return e.getInstance().then(function(e){var n=e.receiver.CastReceiverManager.getInstance();n.onSenderConnected=function(e){$rootScope.$broadcast("chromecast.senderConnected",e)},n.start()})},n}angular.module("ngChromecast").service("ReceiverManager",["CastService",e])}.call(this);